<div class="container">
  <button class="btn btn-primary" ng-click="reload()">Reload</button>

  <div ng-switch on="show">
    <div ng-switch-when="graph">
      <plot height="300" aspect="3" stroke-width="2">
        <lines ng-repeat="s in graph.series | filter:isVisible" x="[[query.epoch]]" y="[[ query[s.name] ]]" stroke="{{ s.color || 'blue' }}"></lines>
      </plot>

      <plot-data name="query" src="[[ '/api/dashboard/test/data' ]]" format="csv" cols="[[ getSeriesNames() ]]">
        <metadata name="epoch" label="Time" format="date"></metadata>
        <metadata ng-repeat="s in graph.series" name="[[ s.name ]]"></metadata>
      </plot-data>

      <ul>
        <li ng-repeat="s in graph.series" ng-click="graph.series[$index].hide=!graph.series[$index].hide">
          <i ng-hide="s.hide" class="icon-circle"> </i>
          <i ng-show="s.hide" class="icon-circle-blank"> </i>
          {{ s.name }}
        </li>
      </ul>
    </div>
  </div>
</div>