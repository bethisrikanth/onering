<h4>Actions</h4>

<ul class="nav nav-list well">
  <li class="nav-header">Lifecycle</li>
  <li>
    <a ng-click="openDialog('maintenanceStatus', this)"><i class="icon-wrench"></i> Set Maintenance Status</a></a>
  </li>
  <li>
    <a ng-click="panes.firstWith('id', 'provision').active=true"><i class="icon-repeat"></i> Redeploy Node</a></a>
  </li>

  <li class="nav-header">Operations</li>
  <li ng-show="node.properties.monitor">
    <a rest="/api/devices/{{node.id}}/set/monitor/false" rest-success="reload()"><i class="icon-remove"> </i> Suspend Monitoring</a>
  </li>
  <li ng-hide="node.properties.monitor">
    <a rest="/api/devices/{{node.id}}/set/monitor/true"  rest-success="reload()"><i class="icon-tasks"> </i> Resume Monitoring</a>
  </li>

  <li rest-show="/api/users/{{node.id}}/keys/system">
    <a rest="/api/users/{{node.id}}/keys/system" rest-method="delete" rest-success="reload()"><i class="icon-lock"> </i> Delete Client Key</a>
  </li>
</ul>



<script type="text/ng-template" id="maintenanceStatus">
  <div class="modal-header">
    <button type="button" class="close" ng-click="close()">&times;</button>
    <h3>Set Maintenance Status</h3>
  </div>

  <div class="modal-body">
    <ul class="nav nav-list status">
      <li>
        <a rest="/api/devices/{{parent.node.id}}/maintenance/healthy" rest-success="close()">
          <span class="name"><i class="icon-ok"></i> Healthy</span>
          <span>All problems fixed, no known issues</span>
        </a>
      </li>
      <li>
        <a rest="/api/devices/{{parent.node.id}}/maintenance/parts" rest-success="close()">
          <span class="name"><i class="icon-parts"></i> Needs Parts</span>
          <span>Something is physically broken and needs to be replaced</span>
        </a>
      </li>
      <li>
        <a rest="/api/devices/{{parent.node.id}}/maintenance/service" rest-success="close()">
          <span class="name"><i class="icon-service"></i> Needs Service</span>
          <span>Requires some form of manual intervention to get the node to a healthy state</span>
        </a>
      </li>
    </ul>
  </div>

  <div class="modal-footer">
    <a class="btn" ng-click="close()">Close</a>
  </div>
</script>


<script type="text/ng-template" id="redeployNode">
  <div class="modal-header">
    <button type="button" class="close" ng-click="close()">&times;</button>
    <h3>Redeploy Node</h3>
  </div>

  <div class="modal-body">
    <p>
      Redeploying this node will reinstall the operating system according to the parameters below.</br>
      <span style="color:red;font-weight:bold">NOTE: This will destroy all data on the machine!</span>
    </p>

    <div ng-include="'views/node-actions-provision-form.html'"></div>
  </div>

  <div class="modal-footer">
    <a class="btn btn-primary">Redeploy</a>
    <a class="btn" ng-click="close()">Close</a>
  </div>
</script>