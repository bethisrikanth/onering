<div>
  <div ng-include="'views/device-spinner.html'" />

  <div class="container device-list" ng-show="results &amp;&amp; !noresults">
    <form>
      <div class="row">
        <div class="span12">
          <div class="alert alert-success" ng-show="saved">{{ saved == true &amp;&amp; 'Saved!' || saved }}</div>

          <br />
<!--           <h5>Search within these results:</h5>
          <form class="form-search" ng-controller="SearchController">
            <input
              type="text"
              class="input-large search-query"
              ng-model="query"
              ui-keypress="{'enter alt-space': 'goQuery()'}"
              placeholder="Filter results..."
              typeahead="f+': ' as f for f in autocomplete | filter:$viewValue | limitTo:25">
          </form> -->

          <br />
          <br />
        </div>
      </div>

      <div class="row">
        <div class="span12">
          <table class="table table-condensed table-hover">
            <thead>
              <tr>
                <th ng-click="sortField='id'; sortReverse=!sortReverse">ID</th>
                <th ng-click="sortField='status'; sortReverse=!sortReverse" class="center"><abbr title="Status">S</abbr></th>
                <th ng-click="sortField='properties.reserved'; sortReverse=!sortReverse" class="center"><abbr title="Reserved"><i class="icon-bookmark-empty"> </i></abbr></th>
                <th ng-click="sortField='properties.alert_state'; sortReverse=!sortReverse" class="center"><abbr title="Alerts"><i class="icon-warning-sign"></i></abbr></th>
                <th ng-click="sortField='maintenance_status'; sortReverse=!sortReverse" class="center"><abbr title="Maintenance Status"><i class="icon-wrench"></i></abbr></th>
                <th ng-click="sortField='name'; sortReverse=!sortReverse">Name</th>
                <th ng-click="sortField='properties.ip'; sortReverse=!sortReverse">Primary IP</th>
                <th ng-click="sortField='properties.site'; sortReverse=!sortReverse">Site</th>
                <th ng-click="sortField='properties.model'; sortReverse=!sortReverse">Model</th>
                <th ng-click="sortField='properties.rack'; sortReverse=!sortReverse">Rack</th>
                <th ng-click="sortField='properties.unit'; sortReverse=!sortReverse">Unit</th>
                <th ng-click="sortField='properties.slot'; sortReverse=!sortReverse">Slot</th>
                <th ng-click="sortField='collected_at'; sortReverse=!sortReverse">Last Seen</th>
                <th ng-click="sortField='properties.notes'; sortReverse=!sortReverse" class="center">Notes</th>
              </tr>
            </thead>

            <tbody>
              <tr ng-repeat="device in results | orderBy:sortField:sortReverse">
                <td class="id"><a target="_blank" tabindex="{{ results.length + $index + 1 }}" href="#/node/{{ device.id }}">{{ device.id }}</a></td>
                <td class="status center">
                  <img title="{{ (device.status || 'unknown') | titleize }}" ng-src="/img/status/{{ device.status || 'unknown' }}.png" />
                </td>
                <td class="center text-reserved">
                  <span ng-show="device.properties.reserved"><i class="icon-bookmark"> </i></span>
                </td>
                <td class="alerts center">
                  <img
                    ng-show="device.properties.alert_state"
                    title="{{ device.properties.alert_state | titleize }}"
                    ng-src="/img/alerts/{{ (device.properties.alert_state || 'unknown') }}.png"
                  />
                </td>
                <td class="maintenance_status center">
                  <i class="icon-{{ (device.maintenance_status || 'healthy') }}" title="Needs {{ (device.maintenance_status || 'healthy') | titleize }}"></i>
                </td>
                <td>{{ device.name | section:'.':0:1 }}</td>
                <td>{{ device.properties.ip }}</td>
                <td>{{ device.properties.site | uppercase }}</td>
                <td>{{ device.properties.model | section:' ':-1 }}</td>
                <td>
                  <span>{{ device.properties.rack }}</span>
                </td>
                <td>
                  <span>{{ device.properties.unit | min }}</span>
                </td>
                <td>{{ device.properties.slot }}</td>
                <td>{{ device.collected_at &amp;&amp; (device.collected_at | timeAgo) || '-' }}</td>
                <td>
                  <a
                    ui-jq="popover"
                    ui-options="note_tip_options(device.properties.notes)"
                    class="note_toggle center"
                    ng-show="device.properties.notes">
                    <i class="icon icon-comment"></i>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>

          <br />
          <br />
        </div>
      </div>

      <div class="row" ng-show="pages &amp;&amp; pages.total > 1">
        <div class="span12 center">
          <span>Showing {{ pages.per }} of {{ pages.results }} results &mdash; <a ng-click="$parent.max_results=-1">Show All</a></span>

          <div class="pagination">
            <ul>
              <li ng-show="pages.current==1" class="disabled"><a>&laquo;</a></li>
              <li ng-hide="pages.current==1" ng-click="$parent.pagenum=($parent.pagenum-1)"><a>&laquo;</a></li>

              <li ng-repeat="p in (pages.total | fillArray:1)" class="{{ p==pages.current &amp;&amp; 'active' || '' }}" ng-click="$parent.$parent.pagenum=p">
                <a>{{ p }}</a>
              </li>

              <li ng-show="pages.current==pages.total-1" class="disabled"><a>&raquo;</a></li>
              <li ng-hide="pages.current==pages.total-1" ng-click="$parent.pagenum=($parent.pagenum+1)"><a>&raquo;</a></li>
            </ul>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
