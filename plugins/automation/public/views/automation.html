<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">
      <h1>Backend Processes</h1>
      <br />

      <div class="container-fluid widget-pane">
        <div class="row-fluid">
          <div class="span8">
            <div class="widget-title">Jobs</div>

            <div class="widget-content widget-expand">
              <table class="table table-striped table-condensed table-hover">
                <thead>
                  <tr>
                    <th><abbr title="Status">S</abbr></th>
                    <th>Task</th>
                    <th>Runtime</th>
                  </tr>
                </thead>

                <tbody>
                  <tr ng-repeat="job in jobs.data">
                    <td><i title="{{ job.status | titleize }}" class="icon-circle text-{{ job.status }}"> </i></td>
                    <td>{{ job.tasks | filter:{'type':'.'} | pluck:'type' | join:', ' }}</td>
                    <td>{{ job.runtime }} seconds</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="span4">
            <div class="widget-title">Job Status</div>

            <div class="widget-content widget-expand">
              <table class="table table-striped table-condensed">
                <tbody>
                  <tr ng-repeat="(status, count) in jobs.status">
                    <td><i class="icon-circle text-{{ status }}"> </i>&nbsp;&nbsp;{{ status | titleize }}</td>
                    <td>{{ count }}</td>
                  </tr>
                </tbody>
              </table>

              <button class="btn" rest="/api/automation/requests/flush" rest-success="reload()"><i class="icon-fire"> </i>&nbsp;&nbsp;Flush Queue</button>
              <button class="btn" rest="/api/automation/requests/purge" rest-success="reload()"><i class="icon-trash"> </i>&nbsp;&nbsp;Purge Finished Jobs</button>
              <button class="btn" rest="/api/automation/requests/nuke" rest-success="reload()"><i class="icon-ban-circle"> </i>&nbsp;&nbsp;Purge All</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>